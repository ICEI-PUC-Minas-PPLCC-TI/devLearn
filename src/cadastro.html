<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
<meta name="description" content="" />
<meta name="author" content="" />
<title>devLearn • Cadastro de cursos</title>
<link rel="icon" type="image/x-icon" href="assets/favicon.png" />
<link href="styles/style.css" rel="stylesheet" />
<link href="styles/cadastro.css" rel="stylesheet" />
<script src="https://kit.fontawesome.com/06c06c3fc2.js" crossorigin="anonymous"></script>
</head>

<body onload="init()">
<div id="preloader">
<div class="inner">
<div class="bolas">
<div></div>
<div></div>
<div></div>
</div>
</div>
</div>

<nav class="navbar navbar-expand-lg navbar-dark bg-devlearn">
<div class="container">
<a class="navbar-brand" href="index.html">
<img src="assets/logo.png" width="130" />
</a>
<button
class="navbar-toggler"
type="button"
data-toggle="collapse"
data-target="#navbarResponsive"
aria-controls="navbarResponsive"
aria-expanded="false"
aria-label="Toggle navigation"
>
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarResponsive">
<ul class="navbar-nav ml-auto">
<li class="nav-item">
<a class="nav-link" href="#!">
<button class="btn btn-roxo">MEU PERFIL</button>
</a>
</li>
</ul>
</div>
</div>
</nav>

<div class="row">
<div class="col-xl-6">
<div class="mb-4 text-center text-md-left">
<h1 class="display-4 font-weight-bold mb-3 text-white ls-sm m-5">
<i>Cadastro de cursos<br />
na <strong class="roxo">devLearn</strong></i
>
</h1>
<p class="mb-4 lead text-white-50 m-5">
Seja bem-vindo a página de cadastro de cursos em nossa plataforma.
<br /><strong>Preencha os campos ao lado.</strong>
</p>

<div class="container">

<div class="tbl-header">
<table cellpadding="0" cellspacing="0" border="0">
<thead>
<tr>
<th>#</th>
<th>Título</th>
<th>Nome</th>
<th>Idioma</th>
<th>Conteúdo</th>
<th>Tags</th>
</tr>
</thead>
</table>
</div>
<div class="tbl-content">
<table cellpadding="0" cellspacing="0" border="0" id="grid-cursos">
<tbody id="table-cursos">
<tr>
<td scope="row">1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>


</div>
</div>

</div>

<div class="offset-xl-1 col-xl-5 col-lg-6 col-md-12">
<div class="card m-5" style="z-index: 1">
<div class="card-body p-6">
<div class="mb-4">
<h1 class="mb-4 lh-1 font-weight-bold h2">Cadastro de cursos</h1>
</div>
<form id="frmCadastro">
<!-- action="#"  -->
<div class="form-group">
<input
id="inputTitulo"
type="text"
class="form-control cad"
placeholder="Título"
required
/>
</div>
<div class="form-group">
<input
id="inputNome"
type="text"
class="form-control cad"
placeholder="Nome do autor"
required
/>
</div>
<div class="form-group">
<input
id="inputIdioma"
type="text"
class="form-control cad"
placeholder="Idioma"
required
/>
</div>
<div class="form-group">
<input
id="inputConteudo"
type="text"
class="form-control cad"
placeholder="Conteúdo a ser ensinado"
required
/>
</div>
<div class="form-group">
<input
id="inputTags"
type="text"
class="form-control cad"
placeholder="Tags do curso"
/>
</div>
<div class="form-group">
<input
id="inputId"
type="text"
class="form-control cad"
placeholder="ID (desligado)"
disabled
/>
</div>
<div class="form-group">
<button
type="button"
value="Inserir"
id="btnInsert"
class="btn btn-primary btn-block mb-3"
>
<i class="fas fa-plus"></i> Cadastrar
</button>
</div>
<div class="form-group">
<button
type="button"
value="Alterar"
id="btnUpdate"
class="btn btn-warning btn-primary btn-block mb-3"
>
<i class="far fa-edit"></i> Editar
</button>
</div>
<div class="form-group">
<button
type="button"
value="Excluir"
id="btnDelete"
class="btn btn-danger btn-primary btn-block mb-3"
>
<i class="far fa-trash-alt"></i> Excluir
</button>
</div>
</form>
</div>
</div>
</div>

</div>

<footer class="py-5 bg-devlearn mt-5">
<div class="container">
<p class="m-0 text-center text-white footer">
<img class="img-fluid" width="100" src="assets/logo_footer.png" />
<br />
2021 © <strong>devLearn</strong>. Todos os direitos reserados.
<br />
<button class="btn btn-secondary btn-sm mt-3 redes-sociais">
<i class="fab fa-facebook"></i>
</button>
<button class="btn btn-secondary btn-sm mt-3 redes-sociais">
<i class="fab fa-twitter"></i>
</button>
<button class="btn btn-secondary btn-sm mt-3 redes-sociais">
<i class="fab fa-youtube"></i>
</button>
<button class="btn btn-secondary btn-sm mt-3 redes-sociais">
<i class="fab fa-instagram"></i>
</button>
</p>
</div>
</footer>

<script
type="text/javascript"
src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"
></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="./scripts/cadastro.js"></script>
<script src="./scripts/scripts.js"></script>
<script>
function exibirCursos() {
$("#table-cursos").html("");
for (i = 0; i < db.data.length; i++) {
let curso = db.data[i];
$("#table-cursos").append(`<tr><td scope="row">${curso.id}</td>
<td>${curso.titulo}</td>
<td>${curso.nome}</td>
<td>${curso.idioma}</td>
<td>${curso.conteudo}</td>
<td>${curso.tags}</td>
</tr>`);
}
}
var db = JSON.parse(localStorage.getItem("db_curso"));
if (!db) {
db = db_cursos_iniciais;
}

function init() {
$("#btnInsert").click(function () {
var novoId = db.data.length == 0 ? 1 :  db.data[db.data.length - 1].id + 1;
let campoTitulo = $("#inputTitulo").val();
let campoNome = $("#inputNome").val();
let campoIdioma = $("#inputIdioma").val();
let campoConteudo = $("#inputConteudo").val();
let campoTags = $("#inputTags").val();
let curso = {
id:  novoId,
titulo: campoTitulo,
nome: campoNome,
idioma: campoIdioma,
conteudo: campoConteudo,
tags: campoTags,
};
exibirCursos();
insertCurso(curso);
exibirCursos();

$("#frmCadastro")[0].reset();
});

$("#btnUpdate").click(function () {
let campoId = $("#inputId").val();
let campoTitulo = $("#inputTitulo").val();
let campoNome = $("#inputNome").val();
let campoIdioma = $("#inputIdioma").val();
let campoConteudo = $("#inputConteudo").val();
let campoTags = $("#inputTags").val();

let curso = {
id: Number(campoId),
titulo: campoTitulo,
nome: campoNome,
idioma: campoIdioma,
conteudo: campoConteudo,
tags: campoTags,
};

updateCurso(campoId, curso);
exibirCursos();

$("#frmCadastro")[0].reset();
});

$("#btnDelete").click(function () {
let campoId = $("#inputId").val();
if (campoId == "") {
displayMessage("Selecione um curso a ser excluído.");
return;
}
deleteCurso(parseInt(campoId));
exibirCursos()
$("#frmCadastro")[0].reset()
});

$("#grid-cursos").on("click", "tr", function (e) {
let linhaCurso = this;
colunas = linhaCurso.querySelectorAll("td");

$("#inputId").val(colunas[0].innerText);
$("#inputTitulo").val(colunas[1].innerText);
$("#inputNome").val(colunas[2].innerText);
$("#inputIdioma").val(colunas[3].innerText);
$("#inputConteudo").val(colunas[4].innerText);
$("#inputTags").val(colunas[5].innerText);
});

exibirCursos();
}
</script>
</body>
